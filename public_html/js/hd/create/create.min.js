function ajaxBlocks(e,t){$.ajax({type:"get",url:"/block/ajax-blocks/"+e}).error(function(){alert("Error al obtener los datos\nPor favor, verifique su conexión a Internet")}).done(function(e){$(t).empty(),$(t).append("<option disabled selected> Seleccione un Block </option>"),$.each(e.blocks,function(e,o){$(t).append('<option value="'+o.id+'">'+o.estacion+"</option>")})})}function cargarKilometros(e){var t=document.getElementById("trabajos["+e+"][ubicacion]");$.ajax({url:"/block/ajax-get-limites/"+t.value,type:"get"}).error(function(){alert("Error al obtener los datos\nPor favor verifique su conexión a Internet")}).done(function(t){if(t.error)return void alertify.log(t.msg);document.getElementById("trabajos[0][km_inicio]").setAttribute("placeholder",t.km_inicio),document.getElementById("trabajos[0][km_inicio]").setAttribute("min",t.km_inicio),document.getElementById("trabajos[0][km_inicio]").setAttribute("max",t.km_termino),document.getElementById("trabajos[0][km_termino]").setAttribute("placeholder",t.km_termino),document.getElementById("trabajos[0][km_termino]").setAttribute("min",t.km_inicio),document.getElementById("trabajos[0][km_termino]").setAttribute("max",t.km_termino);var o,i;switch(t.tipo){case"block":o=document.getElementById("trabajos["+e+"][km_inicio]"),o.setAttribute("placeholder",t.km_inicio),o.setAttribute("min",t.km_inicio),o.setAttribute("max",t.km_termino),i=document.getElementById("trabajos["+e+"][km_termino]"),i.removeAttribute("disabled"),i.setAttribute("placeholder",t.km_termino),i.setAttribute("min",t.km_inicio),i.setAttribute("max",t.km_termino);break;case"desvio":o=document.getElementById("trabajos["+e+"][km_inicio]"),o.setAttribute("placeholder",t.km_inicio),o.setAttribute("min",t.km_inicio),o.setAttribute("max",t.km_termino),i=document.getElementById("trabajos["+e+"][km_termino]"),i.removeAttribute("disabled"),i.setAttribute("placeholder",t.km_termino),i.setAttribute("min",t.km_inicio),i.setAttribute("max",t.km_termino);break;case"desviador":o=document.getElementById("trabajos["+e+"][km_inicio]"),o.setAttribute("placeholder",t.km_inicio),o.setAttribute("min",t.km_inicio),o.setAttribute("max",t.km_termino),i=document.getElementById("trabajos["+e+"][km_termino]"),i.value="",i.setAttribute("disabled","disabled")}})}$(document).ready(function(){$("#fecha").datepicker({defaultDate:"-1m",numberOfMonths:2,showAnim:"slideDown",beforeShow:function(){$(".ui-datepicker").css("font-size",12)}}),$("#modalDesviador").on("shown.bs.modal"),$("#modalDesvio").on("shown.bs.modal"),$("#modalTrabajo").on("shown.bs.modal"),$("#modalMaterialCol").on("shown.bs.modal"),$("#modalMaterialRet").on("shown.bs.modal"),$("#selectsectorDesviador").on("change",function(e){e.preventDefault();var t=e.target.value;ajaxBlocks(t,"#selectblockDesviador")}),$("#selectsector").on("change",function(e){e.preventDefault();var t=e.target.value,o=$(".selectubicacion");$("#selectblock").empty(),o.empty(),o.append('<option disabled selected value="null"> Seleccione Block </option>'),ajaxBlocks(t,"#selectblock");var i=$(".km-inicio"),n=$(".km-termino");i.removeAttr("placeholder"),i.removeAttr("min"),i.removeAttr("max"),n.removeAttr("placeholder"),n.removeAttr("min"),n.removeAttr("max")})}),$("#selectblock").on("change",function(e){e.preventDefault();var t=e.target.value;"empty"==t||"null"==t?$(".selectubicacion").empty():$.ajax({url:"/block/ajax-block-todo/"+t,type:"GET"}).error(function(){alert("Error al obtener los datos\nPor favor verifique su conexión a Internet")}).done(function(e){var t=$(".selectubicacion");t.empty(),t.append('<option selected="selected" disabled="disabled"> Seleccione vía </option>'),t.append('<optgroup label="Vía Principal">'),t.append("<option value=block-"+e.block.id+">"+e.block.estacion+"</option>"),t.append("</optgroup>");var o=$(".km-inicio"),i=$(".km-termino");o.removeAttr("placeholder"),o.removeAttr("min"),o.removeAttr("max"),i.removeAttr("placeholder"),i.removeAttr("min"),i.removeAttr("max"),$.each(e.desvios,function(o,i){0===o&&t.append('<optgroup label="Desvíos">'),t.append("<option value=desvio-"+i.id+">"+i.nombre+"</option>"),o==e.desvios.length-1&&t.append("</optgroup>")}),$.each(e.desviadores,function(e,o){0===e&&t.append('<optgroup label="Desviadores">'),t.append("<option value=desviador-"+o.id+">"+o.nombre+"</option>")})})});