function verHojaDiaria(a){$.ajax({url:"/hd/"+a,type:"GET"}).success(function(a){escribirDetalle(a)}).error(function(){alert("Error al descargar datos\nPor favor verifique su conexión a Internet")})}function editarHojaDiaria(){alertify.log("Función editar no disponible")}function borrarHojaDiaria(a){setTimeout(function(){1==confirm("¿Borrar Hoja Diaria?")&&$.ajax({url:"/hd/"+a,type:"DELETE"}).success(function(a){a.error?alert(a.msg):window.location.reload()}).error(function(){console.log("error")})},3e3)}function escribirDetalle(a){if(a.error)return void alertify.log(a.msg);var e=$("#div_detalle");e.empty();var t=$("<h4></h4>",{html:"Grupo: <b>"+a.hojaDiaria.grupo_trabajo.base+"</b> Fecha: <b>"+a.hojaDiaria.fecha+"</b>"}),d=$("<div></div>",{"class":"btn-group pull-right"}),r=$("<a></a>",{"class":"btn btn-default glyphicon glyphicon-trash",title:"Borrar",href:"#",onClick:"borrarHojaDiaria( "+a.hojaDiaria.id+" );return false;"}),i=$("<a></a>",{"class":"btn btn-default glyphicon glyphicon-pencil",title:"Editar",href:"#",onClick:"editarHojaDiaria( "+a.hojaDiaria.id+" );return false;"}),n=$("<a></a>",{"class":"btn btn-default glyphicon glyphicon-print",title:"Imprimir",href:"javascript:window.print();"});if(d.append(n),d.append(i),d.append(r),e.append(d),e.append(t),e.append("<legend></legend>"),"undefined"!=typeof a.hojaDiaria.detalle_hoja_diaria[0]&&null!==a.hojaDiaria.detalle_hoja_diaria[0]){var p=$("<table></table>",{"class":"table table-bordered table-striped"}),o=$("<thead></thead>"),l=$("<tr></tr>");l.append("<th>#</th>"),l.append("<th>Trabajo</th>"),l.append("<th>Block: "+a.hojaDiaria.detalle_hoja_diaria[0].block.estacion+"</th>"),l.append("<th>Km Inicio</th>"),l.append("<th>Km Termino</th>"),l.append("<th>Cantidad</th>"),o.append(l),p.append(o),e.append("<h4>Trabajos Realizados </h4>"),e.append(p);var h=$("<tbody></tbody>");$.each(a.hojaDiaria.detalle_hoja_diaria,function(a,e){var t=$("<tr></tr>");t.append("<td>"+(a+1)+"</td>"),t.append("<td>"+e.trabajo.nombre+"</td>"),t.append(null!=e.desvio?"<td>"+e.desvio.nombre+"</td>":null!=e.desviador?"<td>"+e.desviador.nombre+"</td>":"<td> Vía Principal</td>"),t.append("<td>"+e.km_inicio+"</td>"),t.append("<td>"+e.km_termino+"</td>"),t.append("<td>"+e.cantidad+"</td>"),h.append(t)}),p.append(h)}if("undefined"!=typeof a.hojaDiaria.detalle_material_colocado[0]&&null!==a.hojaDiaria.detalle_material_colocado[0]){var c=$("<table></table>",{"class":"table table-bordered table-striped"}),s=$("<thead></thead>"),b=$("<tr></tr>");b.append("<th>#</th>"),b.append("<th>Material</th>"),b.append("<th>Reempleo</th>"),b.append("<th>Cantidad</th>"),b.append("<th>Unidad</th>"),s.append(b),c.append(s);var u=$("<tbody></tbody>");$.each(a.hojaDiaria.detalle_material_colocado,function(a,e){var t=$("<tr></tr>"),d="1"===e.reempleo?"Si":"No";t.append("<td>"+(a+1)+"</td>"),t.append("<td>"+e.material.nombre+"</td>"),t.append("<td>"+d+"</td>"),t.append("<td>"+e.cantidad+"</td>"),t.append("<td>"+e.material.unidad+"</td>"),u.append(t)}),c.append(u),e.append("<h4>Materiales Colocados</h4>"),e.append(c)}if("undefined"!=typeof a.hojaDiaria.detalle_material_retirado[0]&&null!==a.hojaDiaria.detalle_material_retirado[0]){var c=$("<table></table>",{"class":"table table-bordered table-striped"}),s=$("<thead></thead>"),b=$("<tr></tr>");b.append("<th>#</th>"),b.append("<th>Material</th>"),b.append("<th>Reempleo</th>"),b.append("<th>Cantidad</th>"),s.append(b),c.append(s);var u=$("<tbody></tbody>");$.each(a.hojaDiaria.detalle_material_retirado,function(a,e){var t=$("<tr></tr>"),d="1"===e.reempleo?"Si":"No";t.append("<td>"+(a+1)+"</td>"),t.append("<td>"+e.material_retirado.nombre+"</td>"),t.append("<td>"+d+"</td>"),t.append("<td>"+e.cantidad+"</td>"),u.append(t)}),c.append(u),e.append("<h4>Materiales Retirados</h4>"),e.append(c)}a.hojaDiaria.observaciones&&(e.append("<h4>Observaciones</h4>"),e.append("<p>"+a.hojaDiaria.observaciones+"</p>"))}$("#tab_trabajados tr").click(function(){$(this).addClass("success").siblings().removeClass("success"),verHojaDiaria($(this).data("id"))});