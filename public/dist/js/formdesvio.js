$("#selectsectorDesvio").on("change",function(e){e.preventDefault();var r=e.target.value;$("#selectblockDesvio").empty(),ajaxBlocks(r,"#selectblockDesvio")}),$("#selectblockDesvio").on("change",function(e){e.preventDefault();var r=e.target.value;$.ajax({url:"/block/"+r+"/desviadores/",type:"get"}).error(function(){alert("Error al obtener los datos\nPor favor, verifique su conexión a Internet")}).done(function(e){var r=$("#formModalDesvio"),o=r.find(".form-group"),a=r.find(".help-block");o.removeClass("required has-error"),a.empty();var i=$("#selectdesviador_norte"),n=$("#selectdesviador_sur");e.error?($("#selectblockDesvio_error").append('<p class="text-warning">'+e.msg+"</p>"),i.empty(),i.prop("disabled",!0),n.empty(),n.prop("disabled",!0)):(i.empty(),i.prop("disabled",!1),i.append("<option disabled selected> Seleccione un Desviador </option>"),$.each(e.desviadores,function(e,r){i.append('<option value="'+r.id+'">'+r.nombre+"  [Km inicio: "+r.km_inicio+"]</option>")}))})}),$("#selectdesviador_norte").on("change",function(e){e.preventDefault();var r=e.target.value;$.ajax({url:"/desviador/get-desviadores-sur/"+r,type:"get"}).error(function(){alert("Error al obtener los datos\nPor favor, verifique su conexión a Internet")}).done(function(e){var r=$("#formModalDesvio"),o=r.find(".form-group"),a=r.find(".help-block");o.removeClass("required has-error"),a.empty();var i=$("#selectdesviador_sur");e.error?($("#selectdesviador_norte_error").append('<p class="text-warning">'+e.msg+"</p>"),i.empty(),i.prop("disabled",!0)):(i.empty(),i.prop("disabled",!1),i.append("<option disabled selected> Seleccione un Desviador </option>"),$.each(e.desviadores,function(e,r){i.append('<option value="'+r.id+'">'+r.nombre+"  [Km inicio: "+r.km_inicio+"]</option>")}))})}),$("#formModalDesvio").submit(function(e){e.preventDefault();var r=$(this),o=r.serialize(),a=r.attr("action"),i=r.attr("method");$.ajax({url:a,type:i,data:o}).error(function(){alert("Error al enviar datos\nPor favor verifique su conexión a Internet")}).done(function(e){if(e.error){var r=$("#formModalDesvio"),o=r.find(".form-group"),a=r.find(".help-block");o.removeClass("required has-error"),a.empty(),$.each(e.msg,function(e,r){var o="#formModalDesvio #"+e+"_error";$(o).addClass("required"),$(o).empty(),$.each(r,function(e,r){$(o).append("<p>"+r+"</p>")}),$("#modalDesvio #"+e+"_div").addClass("required has-error")})}else{var i=$("#modalDesvio");$("#selectblock").trigger("change"),i.modal("hide"),document.getElementById("formModalDesvio").reset();var n=i.find(".form-group"),t=i.find(".help-block");n.removeClass("required has-error"),t.empty(),alertify.log(e.msg)}})});